<!DOCTYPE html>
<html>
  <head>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/header') %>
    <div class="container">
      <h1>Analytics</h1>

      <h2>Course Analytics</h2>
      <div class="flex-container">
        <div class="row">
          <div id="pieChart"></div>
          <div id="pieChart2"></div>
        </div>
      </div>

      <h2>Student Analytics</h2>
      <ul class="list-group">
      <% students.forEach(function (student) { %>
        <li class="list-group-item">
          <a href="/courseInstance/<%= courseInstance.id %>/analytics/student/<%= student.id %>">
            <%= student.uin %>
          </a>
        </li>
      <% }) %>
      </ul>
    </div>
  </body>
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/4.7.2/d3.min.js" charset="utf-8"></script>
  <script src="/js/d3pie.min.js" charset="utf-8"></script>
  <script>
  var pie = new d3pie("pieChart", {
    "header": {
      "title": {
        "text": "Comparing Student Demographics",
        "fontSize": 24,
        "font": "open sans"
      },
      "subtitle": {
        "text": "See how this course's students' compare by major",
        "color": "#999999",
        "fontSize": 12,
        "font": "open sans"
      },
      "titleSubtitlePadding": 9
    },
    "footer": {
      "color": "#999999",
      "fontSize": 10,
      "font": "open sans",
      "location": "bottom-left"
    },
    "size": {
      "canvasWidth": 550,
      "pieOuterRadius": "96%"
    },
    "data": {
      "sortOrder": "value-desc",
      "content": [
        <% pieContent.forEach(function(obj) { %>
          {
            "label": "<%= obj.label %>",
            "value": <%= obj.value %>,
            "color": "<%= obj.color %>",
          },
        <% }) %>
      ]
    },
    "labels": {
      "outer": {
        "pieDistance": 32
      },
      "mainLabel": {
        "fontSize": 11
      },
      "percentage": {
        "color": "#ffffff",
        "decimalPlaces": 0
      },
      "value": {
        "color": "#adadad",
        "fontSize": 11
      },
      "lines": {
        "enabled": true
      },
      "truncation": {
        "enabled": true
      }
    },
    "effects": {
      "pullOutSegmentOnClick": {
        "effect": "linear",
        "speed": 400,
        "size": 8
      }
    },
    "misc": {
      "gradient": {
        "enabled": true,
        "percentage": 100
      }
    }
  });
</script>
<script>
var pie = new d3pie("pieChart2", {
  "header": {
    "title": {
      "text": "Comparing Student Demographics",
      "fontSize": 24,
      "font": "open sans"
    },
    "subtitle": {
      "text": "See how this course's students' compare by major",
      "color": "#999999",
      "fontSize": 12,
      "font": "open sans"
    },
    "titleSubtitlePadding": 9
  },
  "footer": {
    "color": "#999999",
    "fontSize": 10,
    "font": "open sans",
    "location": "bottom-left"
  },
  "size": {
    "canvasWidth": 550,
    "pieOuterRadius": "96%"
  },
  "data": {
    "sortOrder": "value-desc",
    "content": [
      <% pieContent.forEach(function(obj) { %>
        {
          "label": "<%= obj.label %>",
          "value": <%= obj.value %>,
          "color": "<%= obj.color %>",
        },
      <% }) %>
    ]
  },
  "labels": {
    "outer": {
      "pieDistance": 32
    },
    "mainLabel": {
      "fontSize": 11
    },
    "percentage": {
      "color": "#ffffff",
      "decimalPlaces": 0
    },
    "value": {
      "color": "#adadad",
      "fontSize": 11
    },
    "lines": {
      "enabled": true
    },
    "truncation": {
      "enabled": true
    }
  },
  "effects": {
    "pullOutSegmentOnClick": {
      "effect": "linear",
      "speed": 400,
      "size": 8
    }
  },
  "misc": {
    "gradient": {
      "enabled": true,
      "percentage": 100
    }
  }
});
</script>

</html>
